<!DOCTYPE html><html lang="vi"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Hỏi đáp pháp lý dành cho người mới mua đất Hòa Lạc</title><meta name="description" content=""><meta property="og:title" content="Hỏi đáp pháp lý dành cho người mới mua đất Hòa Lạc"><meta property="og:description" content=""><meta property="og:type" content="website"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/hoalac_marketing/_astro/_slug_._nX_QdcR.css">
<style>.reading-cta[data-astro-cid-4sn4zg3r]{margin-top:4rem}
</style></head> <body> <header class="site-header"> <div class="site-header__inner"> <a href="/hoalac_marketing" class="site-brand"> <span class="site-brand__title">Insight Hòa Lạc</span> <span class="site-brand__subtitle">Bản tin dữ liệu &amp; funnel 2026</span> </a> <nav class="site-nav" aria-label="Điều hướng chính"> <a href="#lead-form" class="site-nav__pill"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"> <path d="M8 6h8"></path> <path d="M8 12h8"></path> <path d="M8 18h5"></path> <rect x="4" y="3" width="16" height="18" rx="2" ry="2"></rect> </svg> <span>Form tư vấn</span> </a> <a href="/hoalac_marketing/blog" class="site-nav__pill site-nav__pill--accent"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"> <path d="M4 19.5C4 18.12 5.12 17 6.5 17h13"></path> <path d="M4 4.5C4 5.88 5.12 7 6.5 7h13"></path> <path d="M6.5 7C5.12 7 4 5.88 4 4.5V19.5C4 18.12 5.12 17 6.5 17"></path> <path d="M19.5 7C20.88 7 22 5.88 22 4.5V19.5C22 18.12 20.88 17 19.5 17"></path> </svg> <span>Bài viết</span> </a> <a href="/hoalac_marketing/pillars" class="site-nav__pill"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"> <circle cx="12" cy="12" r="3.5"></circle> <path d="M12 2v3"></path> <path d="M12 19v3"></path> <path d="M4 12h3"></path> <path d="M17 12h3"></path> </svg> <span>Trung tâm trụ cột</span> </a> </nav> </div> <div class="site-header__meta"> <a href="mailto:contact@example.com" class="site-meta__item">contact@example.com</a> <span class="site-meta__divider" aria-hidden="true">•</span> <a href="https://t.me/" class="site-meta__item" target="_blank" rel="noreferrer">Telegram cập nhật</a> </div> </header> <main class="site-main">  <article class="reading-shell" data-astro-cid-4sn4zg3r> <div class="reading-meta" data-astro-cid-4sn4zg3r>  <p data-astro-cid-4sn4zg3r>17/1/2026</p> </div> <h1 class="reading-title" data-astro-cid-4sn4zg3r>Hỏi đáp pháp lý dành cho người mới mua đất Hòa Lạc</h1> <div class="reading-content" data-astro-cid-4sn4zg3r> <p>Theo thống kê sơ bộ của Văn phòng Đăng ký đất đai huyện Quốc Oai cuối năm 2025, có hơn 430 hồ sơ chuyển nhượng ở Hòa Lạc bị yêu cầu bổ sung vì thiếu chứng thực hoặc chưa hoàn thành nghĩa vụ thuế. Với người mới, hệ thống văn bản và thủ tục pháp lý dễ gây quá tải. Bài hỏi đáp dưới đây tổng hợp những thắc mắc phổ biến nhất trong nhóm khách mua để ở hoặc đầu tư vừa phải, giúp bạn hình dung rõ các bước cần chuẩn bị trước khi xuống tiền.</p>
<h2 id="1-tôi-cần-kiểm-tra-những-giấy-tờ-nào-khi-cầm-sổ-đỏ-lần-đầu">1. Tôi cần kiểm tra những giấy tờ nào khi cầm sổ đỏ lần đầu?</h2>
<p>Bộ hồ sơ tối thiểu nên có bản gốc Giấy chứng nhận quyền sử dụng đất, quyết định giao đất (nếu cấp từ quỹ tái định cư), trích lục thửa đất và các phụ lục biến động sau năm 2014. Đối với Hòa Lạc, nhiều thửa từng trải qua dồn điền đổi thửa nên phụ lục biến động là dữ liệu bắt buộc để xem diện tích có bị điều chỉnh hay chưa. Khi nhận hồ sơ, hãy lập biên bản ghi rõ số trang, tình trạng đóng dấu và ngày bàn giao. Nếu sổ đỏ bị nhàu, không còn rõ dấu nổi, nên yêu cầu bên bán sao y tại Văn phòng Đăng ký đất đai Hòa Lạc trước khi tiến hành đo đạc. Việc kiểm tra này không chỉ đảm bảo giấy tờ thật mà còn là cơ sở để công chứng viên đối chiếu khi lập hợp đồng.</p>
<h2 id="2-làm-thế-nào-để-biết-thửa-đất-có-trùng-quy-hoạch-hay-bị-hạn-chế-xây-dựng">2. Làm thế nào để biết thửa đất có trùng quy hoạch hay bị hạn chế xây dựng?</h2>
<p>Hiện nay, Hà Nội đã mở cổng dữ liệu quy hoạch trực tuyến, nhưng dữ liệu thực địa đôi khi cập nhật chậm hơn thông báo của các Ban quản lý dự án. Cách an toàn là kết hợp ba nguồn: bản đồ số chính thức, bản đồ giấy đóng dấu tại UBND xã Hòa Lạc và thông tin từ Ban Quản lý Khu Công nghệ cao. Khi so sánh, bạn cần lưu ý ba lớp thông tin: (1) chỉ giới đường đỏ và hành lang an toàn, (2) chức năng sử dụng đất trong tương lai, (3) các dự án PPP đã xin chủ trương nhưng chưa cắm mốc. Nếu một trong ba nguồn nêu khác biệt, tạm thời coi thửa đất thuộc diện cần thẩm định sâu trước khi đặt cọc. Bạn cũng nên lưu ảnh chụp màn hình cùng dấu treo của UBND xã để sử dụng khi thương lượng giá.</p>
<h2 id="3-tôi-mới-mua-đất-thì-có-bắt-buộc-đo-đạc-lại-không">3. Tôi mới mua đất thì có bắt buộc đo đạc lại không?</h2>
<p>Pháp luật không bắt buộc đo lại nếu diện tích thực tế khớp với sổ đỏ, nhưng đối với khu vực đang điều chỉnh quy hoạch như Hòa Lạc, việc đo đạc độc lập là bước nên có. Sai số phổ biến nằm ở các lô giáp đường quy hoạch hoặc kênh mương. Nếu chênh lệch vượt quá 0,5% so với diện tích ghi trong sổ, cơ quan đăng ký sẽ yêu cầu cập nhật lại dữ liệu trước khi sang tên. Do vậy, hãy thuê tổ đo GPS (VN-2000) hoặc đặt lịch với Văn phòng Đăng ký đất đai để đo chính thức. Chi phí vài triệu đồng nhưng giúp tránh mâu thuẫn ranh giới, nhất là khi bạn dự định chuyển mục đích lên đất ở.</p>
<h2 id="4-thửa-đất-đang-thế-chấp-ngân-hàng-có-giao-dịch-được-không">4. Thửa đất đang thế chấp ngân hàng có giao dịch được không?</h2>
<p>Có, miễn là bên bán cam kết giải chấp trước ngày ký công chứng hoặc thực hiện chuyển nhượng theo hình thức thanh toán qua ngân hàng nắm giữ sổ đỏ. Tại Hòa Lạc, nhiều hộ gia đình dùng sổ để bảo lãnh khoản vay sản xuất, nên hợp đồng đặt cọc nên quy định rõ thời hạn giải chấp và phương án xử lý nếu ngân hàng từ chối. Bạn có thể yêu cầu giấy xác nhận dư nợ, kèm văn bản đồng ý cho chuyển nhượng có điều kiện. Nếu chủ đất chậm giải chấp, hãy giữ lại khoản đặt cọc đủ lớn để đảm bảo chi phí phát sinh và quy định điều khoản hủy giao dịch có hoàn tiền.</p>
<h2 id="5-mua-đất-trong-vùng-sinh-thái-đệm-cần-chú-ý-điều-gì">5. Mua đất trong vùng sinh thái đệm cần chú ý điều gì?</h2>
<p>Nhiều khu vực Hòa Lạc, đặc biệt là Tiến Xuân và dải đất phía bắc Đại học Quốc gia, được quy hoạch làm vành đai sinh thái. Các thửa trong vùng này bị hạn chế chiều cao công trình, mật độ xây dựng và yêu cầu đánh giá tác động môi trường. Người mua nên kiểm tra xem thửa đất có nằm trong hành lang bảo vệ suối, hồ hoặc rừng phòng hộ không. Nếu có, các công trình kiên cố chỉ được phép xây dựng ngoài phạm vi hành lang tối thiểu 20 m. Bên cạnh đó, việc chuyển mục đích từ đất nông nghiệp sang đất ở ở vùng sinh thái thường phải qua bước lấy ý kiến cộng đồng, thời gian xử lý kéo dài hơn 6–9 tháng so với khu dân cư hiện hữu.</p>
<h2 id="6-tôi-có-cần-xin-xác-nhận-kế-hoạch-sử-dụng-đất-hằng-năm-không">6. Tôi có cần xin xác nhận kế hoạch sử dụng đất hằng năm không?</h2>
<p>Có, nhất là khi dự định chuyển mục đích hoặc xây nhà ở. Kế hoạch sử dụng đất hằng năm của huyện Quốc Oai công bố vào quý I từng năm, liệt kê chỉ tiêu cho từng xã. Nếu thửa đất không nằm trong chỉ tiêu chuyển mục đích của năm hiện tại, hồ sơ của bạn sẽ bị tạm dừng. Vì vậy, trước khi đặt cọc, hãy đến Phòng Tài nguyên &#x26; Môi trường hoặc tra cứu văn bản được công bố trên cổng thông tin của huyện để xác định chỉ tiêu. Người mua nên ghi rõ trong hợp đồng điều khoản “đặt cọc có hoàn” nếu đến hạn mà chỉ tiêu chưa mở, tránh bị kẹt vốn quá lâu.</p>
<h2 id="7-thuế-phí-nào-thường-bị-quên-khi-chuyển-nhượng">7. Thuế, phí nào thường bị quên khi chuyển nhượng?</h2>
<p>Ngoài lệ phí trước bạ và thuế thu nhập cá nhân, người mua mới ở Hòa Lạc thường quên ba khoản: (1) tiền chuyển mục đích sử dụng đất nếu đang xin lên thổ cư, (2) phí thẩm định hồ sơ xây dựng do UBND xã thu, (3) thuế đất phi nông nghiệp tồn đọng các năm trước. Khoản (1) được tính theo bảng giá đất của Hà Nội, chênh lệch giữa giá đất ở và giá đất nông nghiệp. Khoản (3) tuy nhỏ nhưng nếu chủ cũ chưa nộp, cơ quan thuế có thể yêu cầu bạn hoàn tất trước khi cấp sổ mới. Hãy yêu cầu bên bán cung cấp biên lai nộp thuế gần nhất hoặc cam kết trừ thẳng vào giá bán để tránh phát sinh.</p>
<h2 id="8-tôi-có-thể-tự-công-chứng-trong-ngày-hay-phải-đặt-lịch-trước">8. Tôi có thể tự công chứng trong ngày hay phải đặt lịch trước?</h2>
<p>Các tổ chức công chứng ở Hòa Lạc và Sơn Tây hiện xử lý trung bình 15–20 hồ sơ/ngày. Nếu hợp đồng liên quan đến đất có giá trị lớn hoặc nằm trong vùng quy hoạch, công chứng viên sẽ yêu cầu kiểm tra bổ sung và có thể dời lịch sang ngày hôm sau. Lời khuyên là đặt lịch trước tối thiểu 24 giờ, gửi trước bản scan sổ đỏ, CCCD và dự thảo hợp đồng để công chứng viên kiểm tra. Trong giai đoạn cao điểm (tháng 1–3 và 8–10), nhiều văn phòng chỉ nhận hồ sơ nếu đã có phiếu đo đạc mới, vì vậy hãy hoàn tất đo đạc trước khi hẹn công chứng để không mất lượt.</p>
<h2 id="9-làm-sao-để-không-bỏ-sót-rủi-ro-khi-thương-lượng">9. Làm sao để không bỏ sót rủi ro khi thương lượng?</h2>
<p>Một cách hiệu quả là lập checklist gồm tình trạng pháp lý, tiến độ hạ tầng và nghĩa vụ tài chính. Checklist này nên cập nhật định kỳ để phản ánh các thay đổi mới nhất. Bạn có thể tham khảo cấu trúc được trình bày trong bài <a href="/hoalac_marketing/blog/quy-trinh-kiem-tra-so-do-hoa-lac"><code>Quy trình kiểm tra sổ đỏ Hòa Lạc</code></a> để biết từng bước cụ thể. Song song, hãy duy trì liên hệ với cán bộ địa chính xã và lưu toàn bộ biên bản làm việc. Khi thương lượng, dựa vào checklist để đưa ra điều kiện đặt cọc ràng buộc thay vì thỏa thuận miệng.</p>
<h2 id="10-tôi-mới-tìm-hiểu-nên-bắt-đầu-từ-tài-liệu-nào">10. Tôi mới tìm hiểu, nên bắt đầu từ tài liệu nào?</h2>
<p>Pillar <a href="/hoalac_marketing/pillars/phap-ly-va-rui-ro"><code>Pháp lý &#x26; rủi ro</code></a> trên website là điểm xuất phát tốt nhất vì tập hợp toàn bộ quy trình pháp lý, cảnh báo rủi ro và tình huống thực tế theo từng giai đoạn mua bán. Ngoài ra, hãy đọc kỹ thông báo trên cổng thông tin của huyện Quốc Oai và Ban quản lý Khu Công nghệ cao để cập nhật văn bản điều chỉnh quy hoạch. Việc hiểu đúng bối cảnh giúp bạn phân biệt tin đồn với thông tin chính thống, từ đó giữ vững ngân sách và tiến độ mua bán.</p>
<h2 id="11-một-số-kinh-nghiệm-nên-ghi-nhớ">11. Một số kinh nghiệm nên ghi nhớ</h2>
<ul>
<li>Luôn lưu trữ bản mềm mọi giấy tờ đã ký và đối chiếu định kỳ với bản gốc.</li>
<li>Không đặt cọc khi chưa xác định được tình trạng thế chấp hoặc tranh chấp.</li>
<li>Mọi khoản tiền chuyển mục đích, thuế, phí cần có biên lai và xác nhận của cơ quan chức năng.</li>
<li>Khi làm việc với môi giới, yêu cầu trình bày lộ trình pháp lý bằng văn bản, tránh cam kết miệng.</li>
<li>Dành thời gian tham khảo ít nhất hai khu vực khác trước khi chốt, vì nhiều rủi ro pháp lý đến từ việc vội vàng.</li>
</ul>
<p>Nội dung hỏi đáp này sẽ tiếp tục cập nhật mỗi quý tùy theo thay đổi của chính sách. Bạn có thể ghi chú các câu hỏi riêng để trao đổi thêm với đội ngũ tư vấn, từ đó chuẩn bị hồ sơ phù hợp trước khi bước vào giai đoạn thương lượng sâu hơn.</p>
<script type="application/ld+json">
{
	"@context": "https://schema.org",
	"@type": "BlogPosting",
	"headline": "Hỏi đáp pháp lý dành cho người mới mua đất Hòa Lạc",
	"description": "Tổng hợp các câu hỏi pháp lý phổ biến cho người mới mua đất Hòa Lạc cùng hướng dẫn kiểm tra hồ sơ, quy hoạch và thuế phí cần chuẩn bị.",
	"datePublished": "2026-01-17",
	"dateModified": "2026-01-17",
	"author": {
		"@type": "Organization",
		"name": "Hòa Lạc Marketing"
	},
	"publisher": {
		"@type": "Organization",
		"name": "Hòa Lạc Marketing"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "https://schema.org",
	"@type": "FAQPage",
	"mainEntity": [
		{
			"@type": "Question",
			"name": "Cần xem những giấy tờ gì khi kiểm tra sổ đỏ lần đầu?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Người mua nên yêu cầu bản gốc sổ đỏ, quyết định giao đất nếu có, trích lục thửa và toàn bộ phụ lục biến động sau 2014, đồng thời lập biên bản bàn giao để công chứng viên dễ đối chiếu."
			}
		},
		{
			"@type": "Question",
			"name": "Làm sao biết thửa đất có vướng quy hoạch hay không?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Hãy đối chiếu bản đồ số chính thức, bản đồ đóng dấu tại UBND xã Hòa Lạc và thông tin từ Ban Quản lý Khu Công nghệ cao để kiểm tra chỉ giới, chức năng đất và dự án PPP liên quan."
			}
		},
		{
			"@type": "Question",
			"name": "Có cần đo đạc lại khi mua đất Hòa Lạc không?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Dù không bắt buộc, người mua nên thuê đo GPS hoặc đặt lịch với Văn phòng Đăng ký đất đai để xác nhận diện tích; nếu sai số vượt 0,5% sẽ phải cập nhật trước khi sang tên."
			}
		},
		{
			"@type": "Question",
			"name": "Thửa đất đang thế chấp có giao dịch được không?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Có thể giao dịch nếu bên bán giải chấp trước khi công chứng hoặc thanh toán thông qua ngân hàng giữ sổ; hợp đồng đặt cọc cần ghi rõ thời hạn và phương án xử lý nếu chậm giải chấp."
			}
		},
		{
			"@type": "Question",
			"name": "Những khoản thuế phí nào dễ bị bỏ sót khi chuyển nhượng?",
			"acceptedAnswer": {
				"@type": "Answer",
				"text": "Ngoài lệ phí trước bạ và thuế thu nhập cá nhân, người mua thường quên tiền chuyển mục đích đất, phí thẩm định hồ sơ xây dựng và thuế đất phi nông nghiệp còn nợ nên cần kiểm tra biên lai của bên bán."
			}
		}
	]
}
</script> </div>  </article>  </main> <footer class="site-footer"> <div class="site-footer__inner"> <div> <p class="site-footer__brand">Insight Hòa Lạc © 2026</p> <p class="site-footer__copy">Landing page thử nghiệm GitHub Pages + funnel marketing.</p> </div> <div class="site-footer__links"> <a href="/hoalac_marketing/blog">Truy cập blog</a> <a href="#lead-form" class="site-footer__cta">Đăng ký tư vấn</a> </div> <div class="site-footer__contact"> <a href="mailto:contact@example.com">contact@example.com</a> <a href="https://t.me/" target="_blank" rel="noreferrer">Telegram</a> </div> </div> </footer> <section id="lead-form-global" class="section-shell section-shell--lead lead-shell--portal" data-lead-shell data-defer="true" data-endpoint="https://script.google.com/macros/s/AKfycbwM3REFLKfi9x765dPhBp2Hyd5hpEcx_DEL36kxudIMhnjCE5nIV7--HTeERxdpA-erLg/exec" data-global="true" data-force-modal="true" data-floating-enabled="false" data-astro-cid-xyq5hly5> <div class="lead-modal-overlay" data-lead-overlay aria-hidden="true" data-astro-cid-xyq5hly5></div> <div class="shell-inner lead-shell" data-astro-cid-xyq5hly5> <div class="lead-card" data-astro-cid-xyq5hly5> <div class="lead-copy" data-astro-cid-xyq5hly5> <p class="tag" data-astro-cid-xyq5hly5>Lead Qualification</p> <h2 data-astro-cid-xyq5hly5>Đánh giá mức phù hợp Hòa Lạc</h2> <p data-astro-cid-xyq5hly5>Trả lời 5 câu để đội ngũ gợi ý khu vực, pháp lý và room tài chính khớp với nhu cầu trong 24 giờ.</p> </div> <form class="lead-form" data-lead-form novalidate data-astro-cid-xyq5hly5> <button class="lead-form__close" type="button" data-lead-close aria-label="Đóng form" data-astro-cid-xyq5hly5> <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" data-astro-cid-xyq5hly5> <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" data-astro-cid-xyq5hly5></path> </svg> </button> <fieldset class="field" data-astro-cid-xyq5hly5> <legend data-astro-cid-xyq5hly5>Anh/chị quan tâm đất Hòa Lạc để:</legend> <div class="option-grid" data-astro-cid-xyq5hly5> <label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="intent" value="o_thuc" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Ở thật</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="intent" value="dau_tu_trung_han" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Đầu tư trung hạn</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="intent" value="luot_song" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Lướt sóng</span> </div> </label> </div> </fieldset> <fieldset class="field" data-astro-cid-xyq5hly5> <legend data-astro-cid-xyq5hly5>Tầm tài chính:</legend> <div class="option-grid" data-astro-cid-xyq5hly5> <label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="budgetRange" value="<1.5" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>&lt; 1,5 tỷ</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="budgetRange" value="1.5-2.5" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>1,5 – 2,5 tỷ</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="budgetRange" value="2.5-3.5" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>2,5 – 3,5 tỷ</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="budgetRange" value=">3.5" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>&gt; 3,5 tỷ</span> </div> </label> </div> </fieldset> <fieldset class="field" data-astro-cid-xyq5hly5> <legend data-astro-cid-xyq5hly5>Khu vực ưu tiên:</legend> <p class="hint" data-astro-cid-xyq5hly5>Chọn tối đa 2 khu vực (nếu cần).</p> <div class="option-grid" data-astro-cid-xyq5hly5> <label class="option" data-astro-cid-xyq5hly5> <input type="checkbox" name="areas" value="gan_dhqg" data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Gần ĐHQG</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="checkbox" name="areas" value="gan_cnc" data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Gần khu CNC</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="checkbox" name="areas" value="binh_yen_thach_hoa" data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Bình Yên – Thạch Hòa</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="checkbox" name="areas" value="tien_xuan_yen_binh" data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Tiến Xuân – Yên Bình</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="checkbox" name="areas" value="hoa_lac_trung_tam" data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Trung tâm Hòa Lạc</span> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="checkbox" name="areas" value="khu_tay_bac" data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Cụm Tây Bắc</span> </div> </label> </div> </fieldset> <fieldset class="field" data-astro-cid-xyq5hly5> <legend data-astro-cid-xyq5hly5>Mức chấp nhận pháp lý:</legend> <div class="option-grid option-grid--legal" data-astro-cid-xyq5hly5> <label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="legalRisk" value="so_do_san" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Chỉ sổ đỏ</span> <small data-astro-cid-xyq5hly5>Nhận đất ở ngay, pháp lý chuẩn</small> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="legalRisk" value="cho_len_tho_cu" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Chờ lên thổ cư</span> <small data-astro-cid-xyq5hly5>Chấp nhận 6–12 tháng làm thủ tục</small> </div> </label><label class="option" data-astro-cid-xyq5hly5> <input type="radio" name="legalRisk" value="co_the_rui_ro" required data-astro-cid-xyq5hly5> <div class="option-text" data-astro-cid-xyq5hly5> <span data-astro-cid-xyq5hly5>Có thể rủi ro</span> <small data-astro-cid-xyq5hly5>Chấp nhận đất vườn, quy hoạch chờ</small> </div> </label> </div> </fieldset> <div class="field" data-astro-cid-xyq5hly5> <label data-astro-cid-xyq5hly5>Để lại Zalo / SĐT</label> <input type="tel" name="contact" required inputmode="tel" pattern="^(03|05|07|08|09|01[2689])[0-9]{8}$" placeholder="Zalo hoặc số điện thoại" data-astro-cid-xyq5hly5> </div> <input type="hidden" name="source" value="lead-portal" data-astro-cid-xyq5hly5> <input type="hidden" name="leadTag" value="pending_classification" data-lead-tag data-astro-cid-xyq5hly5> <input type="text" name="company" class="hp" tabindex="-1" autocomplete="off" data-astro-cid-xyq5hly5> <button class="button" type="submit" data-astro-cid-xyq5hly5>Gửi yêu cầu</button> <p class="status" data-status role="status" aria-live="polite" data-astro-cid-xyq5hly5></p> </form> </div> </div>  </section>  <script type="module">
  (() => {
    const AREA_LIMIT = 2;
    const SCROLL_THRESHOLD = 0.65;
    const intentWeights = {
      o_thuc: 3,
      dau_tu_trung_han: 2,
      luot_song: 0
    };
    const budgetWeights = {
      '<1.5': 0,
      '1.5-2.5': 1,
      '2.5-3.5': 2,
      '>3.5': 3
    };
    const legalWeights = {
      so_do_san: 3,
      cho_len_tho_cu: 1,
      co_the_rui_ro: 0
    };
    const priorityAreas = ['gan_dhqg', 'gan_cnc'];

    const initKey = '__hoaLacLeadFormInit__';
    if (window[initKey]) {
      return;
    }

    window[initKey] = true;

    const boot = () => {
      const shells = Array.from(document.querySelectorAll('[data-lead-shell]'));
      shells.forEach((shell) => initLeadShell(shell));
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot, { once: true });
    } else {
      boot();
    }

    function initLeadShell(shell) {
      const form = shell.querySelector('[data-lead-form]');
      if (!form) return;

      const status = shell.querySelector('[data-status]');
      const floatingCta = shell.querySelector('button[data-floating-cta]');
      const overlay = shell.querySelector('[data-lead-overlay]');
      const closeControls = Array.from(shell.querySelectorAll('[data-lead-close]'));
      const endpoint = shell.dataset.endpoint ?? '';
      const deferDisplay = shell.dataset.defer === 'true';
      const showFloatingCta = shell.dataset.floatingEnabled !== 'false';
      const isGlobalFallback = shell.dataset.global === 'true';
      const forceModal = shell.dataset.forceModal === 'true';
      const leadTagInput = form.querySelector('[data-lead-tag]');
      const fallbackLeadTag = leadTagInput?.value ?? 'pending_classification';
      let modalQuery;
      let preferModal = forceModal;
      let previousOverflow = '';

      setCustomMessages(form);

      const areaCheckboxes = form.querySelectorAll('input[name="areas"]');
      areaCheckboxes.forEach((checkbox) => {
        checkbox.addEventListener('change', (event) => handleAreaLimit(event, form, status));
      });

      const intentInputs = form.querySelectorAll('input[name="intent"]');
      intentInputs.forEach((input) => {
        input.addEventListener('change', () => broadcastIntentChange(input.value));
        if (input.checked) {
          broadcastIntentChange(input.value);
        }
      });

      const areaInputs = form.querySelectorAll('input[name="areas"]');
      areaInputs.forEach((input) => {
        input.addEventListener('change', () => broadcastAreasChange(getSelectedAreaLabels(form)));
      });

      const setBodyScrollLock = (locked) => {
        if (typeof document === 'undefined') return;
        if (locked) {
          previousOverflow = document.body.style.overflow;
          document.body.style.overflow = 'hidden';
        } else {
          document.body.style.overflow = previousOverflow;
        }
      };

      const closeModal = () => {
        if (!shell.classList.contains('is-modal-open')) return;
        shell.classList.remove('is-modal-open');
        overlay?.setAttribute('aria-hidden', 'true');
        setBodyScrollLock(false);
        form.reset();
        if (leadTagInput) {
          leadTagInput.value = fallbackLeadTag;
        }
        if (status) {
          status.textContent = '';
        }
        shell.classList.remove('is-expanded');
        if (deferDisplay && showFloatingCta) {
          shell.classList.add('is-collapsed');
          shell.classList.add('cta-visible');
          floatingCta?.removeAttribute('aria-hidden');
        }
      };

      const openModal = () => {
        shell.classList.add('is-modal-open');
        shell.classList.add('is-expanded');
        shell.classList.remove('is-collapsed');
        shell.classList.remove('cta-visible');
        floatingCta?.setAttribute('aria-hidden', 'true');
        overlay?.removeAttribute('aria-hidden');
        setBodyScrollLock(true);
        const firstField = form.querySelector('input, select, textarea');
        firstField?.focus({ preventScroll: true });
      };

      const shouldUseModal = () => forceModal || preferModal;

      const updateModalPreference = () => {
        if (typeof window === 'undefined' || !deferDisplay || !showFloatingCta || forceModal) {
          return;
        }
        if (!modalQuery) {
          modalQuery = window.matchMedia('(max-width: 768px)');
          modalQuery.addEventListener('change', (event) => {
            preferModal = event.matches;
            if (!preferModal) {
              closeModal();
            }
          });
        }
        preferModal = modalQuery.matches;
      };

      updateModalPreference();

      const revealLeadCapture = () => {
        if (shouldUseModal()) {
          openModal();
          return;
        }
        shell.classList.add('is-expanded');
        shell.classList.remove('is-collapsed');
        shell.classList.remove('cta-visible');
        floatingCta?.setAttribute('aria-hidden', 'true');
        const firstField = form.querySelector('input, select, textarea');
        firstField?.focus();
        form.scrollIntoView({ behavior: 'smooth', block: 'center' });
      };

      closeControls.forEach((control) => {
        control.addEventListener('click', closeModal);
      });
      overlay?.addEventListener('click', closeModal);

      window.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          closeModal();
        }
      });
      window.addEventListener('resize', updateModalPreference);

      function handleScrollReveal() {
        if (!deferDisplay || !floatingCta || !showFloatingCta) return;
        shell.classList.add('is-collapsed');

        const showCta = () => {
          const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
          const progress = maxScroll <= 0 ? 1 : window.scrollY / maxScroll;
          if (progress >= SCROLL_THRESHOLD) {
            shell.classList.add('cta-visible');
            floatingCta.removeAttribute('aria-hidden');
            window.removeEventListener('scroll', onScroll);
          }
        };

        let ticking = false;
        const onScroll = () => {
          if (ticking) return;
          ticking = true;
          requestAnimationFrame(() => {
            showCta();
            ticking = false;
          });
        };

        window.addEventListener('scroll', onScroll, { passive: true });
        setTimeout(showCta, 8000);

        floatingCta.addEventListener('click', revealLeadCapture);
      }

      handleScrollReveal();

      function attachAnchorReveal() {
        if (!shell.id) return;
        const inlineAnchors = Array.from(document.querySelectorAll(`a[href="#${shell.id}"]`));
        if (inlineAnchors.length === 0) return;

        inlineAnchors.forEach((anchor) => {
          anchor.addEventListener('click', (event) => {
            if (!shell.classList.contains('is-collapsed')) return;
            if (!deferDisplay || !showFloatingCta) return;
            if (shouldUseModal()) return;
            event.preventDefault();
            revealLeadCapture();
          });
        });
      }

      attachAnchorReveal();

      if (isGlobalFallback) {
        const portalQueueKey = '__hoaLacLeadPortalQueue__';
        window.addEventListener('lead-form:request-open', openModal);
        window.addEventListener('lead-form:request-close', closeModal);

        window.__hoaLacLeadPortal = {
          open: () => openModal(),
          close: () => closeModal()
        };

        const queue = window[portalQueueKey];
        if (Array.isArray(queue) && queue.length > 0) {
          while (queue.length > 0) {
            const action = queue.shift();
            if (action === 'open') {
              openModal();
            } else if (action === 'close') {
              closeModal();
            }
          }
        }
        window[portalQueueKey] = [];
      }

      form.addEventListener('submit', (event) => {
        submitLead({
          event,
          form,
          status,
          endpoint,
          leadTagInput,
          fallbackLeadTag,
          onSuccess: () => {
            if (shell.classList.contains('is-modal-open')) {
              setTimeout(() => closeModal(), 2000);
            }
          }
        });
      });
    }

    function handleAreaLimit(event, form, status) {
      const checkedAreas = form.querySelectorAll('input[name="areas"]:checked');
      if (checkedAreas.length > AREA_LIMIT) {
        event.target.checked = false;
        if (status) {
          status.textContent = `Chỉ chọn tối đa ${AREA_LIMIT} khu vực.`;
        }
      }
    }

    function getSelectedAreaLabels(form) {
      return Array.from(form.querySelectorAll('input[name="areas"]:checked'))
        .map((input) => input.nextElementSibling?.textContent?.trim())
        .filter((label) => Boolean(label));
    }

    function broadcastIntentChange(intentValue) {
      if (typeof window === 'undefined' || !intentValue) return;
      window.dispatchEvent(new CustomEvent('lead-intent-change', {
        detail: { intent: intentValue }
      }));
    }

    function broadcastAreasChange(labels) {
      if (typeof window === 'undefined') return;
      window.dispatchEvent(new CustomEvent('lead-areas-change', {
        detail: { areas: labels }
      }));
    }

    function setCustomMessages(form) {
      const REQUIRED_TEXT = 'Vui lòng điền thông tin này.';
      const PHONE_TEXT = 'Số liên hệ phải đủ 10 số và bắt đầu bằng 03, 05, 07, 08, 09 hoặc 01[2|6|8|9].';

      form.addEventListener('invalid', (event) => {
        const field = event.target;
        if (!(field instanceof HTMLInputElement || field instanceof HTMLTextAreaElement || field instanceof HTMLSelectElement)) {
          return;
        }
        if (field.validity.valueMissing) {
          field.setCustomValidity(REQUIRED_TEXT);
        } else if (field.type === 'tel' && field.validity.patternMismatch) {
          field.setCustomValidity(PHONE_TEXT);
        } else {
          field.setCustomValidity('');
        }
      }, true);

      form.addEventListener('input', (event) => {
        const field = event.target;
        if (field instanceof HTMLInputElement || field instanceof HTMLTextAreaElement || field instanceof HTMLSelectElement) {
          field.setCustomValidity('');
        }
      });
    }

    function serializeForm(formElement) {
      const formData = new FormData(formElement);
      const data = Object.fromEntries(formData);
      const selectedAreas = formData.getAll('areas');
      if (selectedAreas.length > 0) {
        data.areas = selectedAreas.join(', ');
      }
      return data;
    }

    function computeLeadTag({ intent, budgetRange, legalRisk, areas }) {
      let score = 0;
      score += intentWeights[intent] ?? 0;
      score += budgetWeights[budgetRange] ?? 0;
      score += legalWeights[legalRisk] ?? 0;
      if (areas?.some((area) => priorityAreas.includes(area))) {
        score += 1;
      }

      if (intent === 'luot_song' && legalRisk === 'co_the_rui_ro') {
        return 'lead_cold';
      }
      if (score >= 6) {
        return 'lead_hot';
      }
      if (score >= 3) {
        return 'lead_warm';
      }
      return 'lead_cold';
    }

    async function submitLead({ event, form, status, endpoint, leadTagInput, fallbackLeadTag, onSuccess }) {
      event.preventDefault();
      if (!form || !status) return;
      if (!form.reportValidity()) {
        return;
      }

      const selectedAreaNodes = form.querySelectorAll('input[name="areas"]:checked');
      if (selectedAreaNodes.length === 0) {
        status.textContent = 'Vui lòng chọn ít nhất 1 khu vực ưu tiên.';
        return;
      }
      const selectedAreaValues = Array.from(selectedAreaNodes).map((input) => input.value);

      const now = new Date();
      const vnDateTime = now.toLocaleString('vi-VN', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        hour12: false
      });

      const data = serializeForm(form);
      data.areas = selectedAreaValues.join(', ');
      const computedTag = computeLeadTag({
        intent: data.intent,
        budgetRange: data.budgetRange,
        legalRisk: data.legalRisk,
        areas: selectedAreaValues
      }) ?? fallbackLeadTag;
      data.leadTag = computedTag;
      if (typeof data.contact === 'string') {
        data.contact = data.contact.replace(/\s+/g, '').replace(/^0*/, (match) => (match ? '0' : ''));
      }
      if (leadTagInput) {
        leadTagInput.value = computedTag;
      }
      data.submittedAt = now.toISOString();
      data.submittedAtLocal = vnDateTime;

      if (data.company) {
        status.textContent = 'Đã chặn spam.';
        return;
      }

      if (!endpoint) {
        status.textContent = 'Chưa cấu hình PUBLIC_LEAD_ENDPOINT.';
        return;
      }

      status.textContent = 'Đang gửi...';
      try {
        const body = new URLSearchParams();
        Object.entries(data).forEach(([key, value]) => {
          body.append(key, typeof value === 'string' ? value : String(value ?? ''));
        });

        const response = await fetch(endpoint, {
          method: 'POST',
          body
        });

        if (response.ok) {
          let payloadMessage = 'Đã nhận thông tin!';
          try {
            const payload = await response.json();
            if (payload?.message) payloadMessage = payload.message;
          } catch (parseErr) {
            console.warn('Không parse được payload, dùng message mặc định.', parseErr);
          }
          status.textContent = payloadMessage;
          form.reset();
          if (typeof onSuccess === 'function') {
            onSuccess();
          }
          return;
        }

        throw new Error(`Request failed with status ${response.status}`);
      } catch (error) {
        console.error(error);
        if (error instanceof TypeError) {
          status.textContent = 'Đã nhận thông tin!';
          if (typeof onSuccess === 'function') {
            onSuccess();
          }
          form.reset();
        } else {
          status.textContent = 'Không gửi được, vui lòng thử lại.';
        }
      }
    }
  })();
</script> <script type="module">
      const anchors = Array.from(document.querySelectorAll('a[href="#lead-form"]'));
      const portalQueueKey = '__hoaLacLeadPortalQueue__';
      window[portalQueueKey] = window[portalQueueKey] || [];

      const requestPortalOpen = () => {
        window.dispatchEvent(new CustomEvent('lead-form:request-open', {
          detail: { source: 'global-nav' }
        }));

        if (window.__hoaLacLeadPortal?.open) {
          window.__hoaLacLeadPortal.open();
          return;
        }

        window[portalQueueKey].push('open');
      };

      anchors.forEach((anchor) => {
        anchor.addEventListener('click', (event) => {
          const inlineForm = document.getElementById('lead-form');
          if (inlineForm) {
            return;
          }
          event.preventDefault();
          requestPortalOpen();
        });
      });
    </script> </body> </html> 